{"is_source_file": true, "format": "Python", "description": "This file contains test cases for the normalization process of a Thirukkural project, involving dataset setup, module reloading, and validation of dataset transformations.", "external_files": ["src/api/main.py", "src/api/models.py"], "external_methods": ["sys.path.insert", "importlib.import_module", "importlib.reload", "json.dump", "Path.resolve", "Path.mkdir", "Path.read_text", "Path.write_text"], "published": ["_DATASET"], "classes": [], "methods": [{"name": "Path _write_temp_dataset(tmp_path: Path, data: List[Dict[str, Any]])", "description": "Creates a temporary dataset JSON file with provided data.", "scope": "", "scopeKind": ""}, {"name": "_reload_with_dataset(tmp_path: Path, dataset: List[Dict[str, Any]])", "description": "Sets up a temporary module environment with a custom dataset, modifies the main module to point to this dataset, then imports and reloads the module.", "scope": "", "scopeKind": ""}, {"name": "test_normalization_new_schema_minimal(tmp_path: Path)", "description": "Tests dataset normalization with a minimal dataset structure.", "scope": "", "scopeKind": ""}, {"name": "test_normalization_fallbacks_translation(tmp_path: Path)", "description": "Tests fallback logic for missing translations, using couplets and explanations.", "scope": "", "scopeKind": ""}, {"name": "test_normalization_old_schema_passthrough(tmp_path: Path)", "description": "Tests processing of dataset entries with older schema field names.", "scope": "", "scopeKind": ""}, {"name": "test_invalid_entries_are_skipped(tmp_path: Path)", "description": "Ensures invalid dataset entries are detected and cause exceptions as intended.", "scope": "", "scopeKind": ""}], "calls": ["importlib.import_module", "importlib.reload", "json.dump", "sys.path.insert", "sys.path.pop", "Path.mkdir", "Path.open", "Path.read_text", "Path.write_text"], "search-terms": ["test_normalization", "dataset", "reload_with_dataset", "_DATASET", "thirukural", "normalize", "dataset schema", "temporary module setup"], "state": 2, "file_id": 7, "knowledge_revision": 21, "git_revision": "5acded489449a3dc9fbec088f879c59cc8233982", "revision_history": [{"19": ""}, {"21": "5acded489449a3dc9fbec088f879c59cc8233982"}], "ctags": [{"_type": "tag", "name": "BASE_DIR", "path": "/home/kavia/workspace/code-generation/thirukural-explorer-223287-223304/thirukural_backend/tests/test_normalization.py", "pattern": "/^BASE_DIR = Path(__file__).resolve().parents[1]$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "SRC_DIR", "path": "/home/kavia/workspace/code-generation/thirukural-explorer-223287-223304/thirukural_backend/tests/test_normalization.py", "pattern": "/^SRC_DIR = BASE_DIR \\/ \"src\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_reload_with_dataset", "path": "/home/kavia/workspace/code-generation/thirukural-explorer-223287-223304/thirukural_backend/tests/test_normalization.py", "pattern": "/^def _reload_with_dataset(tmp_path: Path, dataset: List[Dict[str, Any]]):$/", "language": "Python", "kind": "function", "signature": "(tmp_path: Path, dataset: List[Dict[str, Any]])"}, {"_type": "tag", "name": "_write_temp_dataset", "path": "/home/kavia/workspace/code-generation/thirukural-explorer-223287-223304/thirukural_backend/tests/test_normalization.py", "pattern": "/^def _write_temp_dataset(tmp_path: Path, data: List[Dict[str, Any]]) -> Path:$/", "language": "Python", "typeref": "typename:Path", "kind": "function", "signature": "(tmp_path: Path, data: List[Dict[str, Any]])"}, {"_type": "tag", "name": "test_invalid_entries_are_skipped", "path": "/home/kavia/workspace/code-generation/thirukural-explorer-223287-223304/thirukural_backend/tests/test_normalization.py", "pattern": "/^def test_invalid_entries_are_skipped(tmp_path: Path):$/", "language": "Python", "kind": "function", "signature": "(tmp_path: Path)"}, {"_type": "tag", "name": "test_normalization_fallbacks_translation", "path": "/home/kavia/workspace/code-generation/thirukural-explorer-223287-223304/thirukural_backend/tests/test_normalization.py", "pattern": "/^def test_normalization_fallbacks_translation(tmp_path: Path):$/", "language": "Python", "kind": "function", "signature": "(tmp_path: Path)"}, {"_type": "tag", "name": "test_normalization_new_schema_minimal", "path": "/home/kavia/workspace/code-generation/thirukural-explorer-223287-223304/thirukural_backend/tests/test_normalization.py", "pattern": "/^def test_normalization_new_schema_minimal(tmp_path: Path):$/", "language": "Python", "kind": "function", "signature": "(tmp_path: Path)"}, {"_type": "tag", "name": "test_normalization_old_schema_passthrough", "path": "/home/kavia/workspace/code-generation/thirukural-explorer-223287-223304/thirukural_backend/tests/test_normalization.py", "pattern": "/^def test_normalization_old_schema_passthrough(tmp_path: Path):$/", "language": "Python", "kind": "function", "signature": "(tmp_path: Path)"}], "hash": "f35be737c85250f7a98d0b79bf23e09b", "format-version": 4, "code-base-name": "thirukural_backend", "filename": "thirukural_backend/tests/test_normalization.py", "fields": [{"name": "BASE_DIR = Path(__file__).resolve().parents[1]", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "SRC_DIR = BASE_DIR \\/ \"src\"", "scope": "", "scopeKind": "", "description": "unavailable"}]}