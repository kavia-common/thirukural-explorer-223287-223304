{"is_source_file": true, "format": "Python", "description": "This file contains unit tests for the normalization functions and data processing logic in the thirukural_backend project, specifically testing dataset parsing and handling of different data schemas related to the Thirukkural dataset.", "external_files": ["src/api/main.py", "src/api/models.py"], "external_methods": ["importlib.import_module", "importlib.reload", "sys.path.insert", "sys.path.pop", "Path.resolve", "Path.read_text", "Path.write_text", "json.dump", "Path.mkdir"], "published": [], "classes": [], "methods": [{"name": "Path _write_temp_dataset(tmp_path: Path, data: List[Dict[str, Any]])", "description": "Creates a temporary dataset JSON file at a specified path with provided data.", "scope": "", "scopeKind": ""}, {"name": "_reload_with_dataset(tmp_path: Path, dataset: List[Dict[str, Any]])", "description": "Sets up a temporary environment, patches paths, and reloads the main module with a custom dataset for testing.", "scope": "", "scopeKind": ""}, {"name": "test_normalization_new_schema_minimal(tmp_path: Path)", "description": "Tests dataset processing with a minimal new schema dataset containing only necessary fields.", "scope": "", "scopeKind": ""}, {"name": "test_normalization_fallbacks_translation(tmp_path: Path)", "description": "Verifies fallback mechanisms when translation fields are missing, ensuring dataset includes correct derived data.", "scope": "", "scopeKind": ""}, {"name": "test_normalization_old_schema_passthrough(tmp_path: Path)", "description": "Checks processing of dataset entries with old schema, including section and chapter fields.", "scope": "", "scopeKind": ""}, {"name": "test_invalid_entries_are_skipped(tmp_path: Path)", "description": "Ensures invalid or malformed dataset entries are skipped or cause errors appropriately.", "scope": "", "scopeKind": ""}], "calls": ["importlib.import_module", "importlib.reload", "sys.path.insert", "sys.path.pop", "Path.resolve", "Path.read_text", "Path.write_text", "json.dump", "Path.mkdir"], "search-terms": ["pytest", "dataset", "temp environment", "thirukural", "test_normalization", "schema", "reload module", "path patching"], "state": 2, "file_id": 7, "knowledge_revision": 19, "git_revision": "", "ctags": [{"_type": "tag", "name": "BASE_DIR", "path": "/home/kavia/workspace/code-generation/thirukural-explorer-223287-223304/thirukural_backend/tests/test_normalization.py", "pattern": "/^BASE_DIR = Path(__file__).resolve().parents[1]$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "SRC_DIR", "path": "/home/kavia/workspace/code-generation/thirukural-explorer-223287-223304/thirukural_backend/tests/test_normalization.py", "pattern": "/^SRC_DIR = BASE_DIR \\/ \"src\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_reload_with_dataset", "path": "/home/kavia/workspace/code-generation/thirukural-explorer-223287-223304/thirukural_backend/tests/test_normalization.py", "pattern": "/^def _reload_with_dataset(tmp_path: Path, dataset: List[Dict[str, Any]]):$/", "language": "Python", "kind": "function", "signature": "(tmp_path: Path, dataset: List[Dict[str, Any]])"}, {"_type": "tag", "name": "_write_temp_dataset", "path": "/home/kavia/workspace/code-generation/thirukural-explorer-223287-223304/thirukural_backend/tests/test_normalization.py", "pattern": "/^def _write_temp_dataset(tmp_path: Path, data: List[Dict[str, Any]]) -> Path:$/", "language": "Python", "typeref": "typename:Path", "kind": "function", "signature": "(tmp_path: Path, data: List[Dict[str, Any]])"}, {"_type": "tag", "name": "main_module", "path": "/home/kavia/workspace/code-generation/thirukural-explorer-223287-223304/thirukural_backend/tests/test_normalization.py", "pattern": "/^from src.api import main as main_module  # noqa: E402$/", "language": "Python", "kind": "unknown", "nameref": "unknown:main"}, {"_type": "tag", "name": "test_invalid_entries_are_skipped", "path": "/home/kavia/workspace/code-generation/thirukural-explorer-223287-223304/thirukural_backend/tests/test_normalization.py", "pattern": "/^def test_invalid_entries_are_skipped(tmp_path: Path):$/", "language": "Python", "kind": "function", "signature": "(tmp_path: Path)"}, {"_type": "tag", "name": "test_normalization_fallbacks_translation", "path": "/home/kavia/workspace/code-generation/thirukural-explorer-223287-223304/thirukural_backend/tests/test_normalization.py", "pattern": "/^def test_normalization_fallbacks_translation(tmp_path: Path):$/", "language": "Python", "kind": "function", "signature": "(tmp_path: Path)"}, {"_type": "tag", "name": "test_normalization_new_schema_minimal", "path": "/home/kavia/workspace/code-generation/thirukural-explorer-223287-223304/thirukural_backend/tests/test_normalization.py", "pattern": "/^def test_normalization_new_schema_minimal(tmp_path: Path):$/", "language": "Python", "kind": "function", "signature": "(tmp_path: Path)"}, {"_type": "tag", "name": "test_normalization_old_schema_passthrough", "path": "/home/kavia/workspace/code-generation/thirukural-explorer-223287-223304/thirukural_backend/tests/test_normalization.py", "pattern": "/^def test_normalization_old_schema_passthrough(tmp_path: Path):$/", "language": "Python", "kind": "function", "signature": "(tmp_path: Path)"}], "hash": "df7f3a45ebb2dcecab09352e164c9e6e", "format-version": 4, "code-base-name": "thirukural_backend", "filename": "thirukural_backend/tests/test_normalization.py", "fields": [{"name": "BASE_DIR = Path(__file__).resolve().parents[1]", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "SRC_DIR = BASE_DIR \\/ \"src\"", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"19": ""}]}